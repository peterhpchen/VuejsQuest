<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>非同步組件 | 勇者鬥 Vue 龍</title>
    <meta name="description" content="Vue.js 學習之旅">
    <link rel="icon" href="/VuejsQuest/logo.ico">
    
    <link rel="preload" href="/VuejsQuest/assets/css/0.styles.9be503db.css" as="style"><link rel="preload" href="/VuejsQuest/assets/js/app.f1a38c46.js" as="script"><link rel="preload" href="/VuejsQuest/assets/js/24.e80266e1.js" as="script"><link rel="prefetch" href="/VuejsQuest/assets/js/10.344badc1.js"><link rel="prefetch" href="/VuejsQuest/assets/js/11.095a37a4.js"><link rel="prefetch" href="/VuejsQuest/assets/js/12.ac205bb3.js"><link rel="prefetch" href="/VuejsQuest/assets/js/13.66d6e645.js"><link rel="prefetch" href="/VuejsQuest/assets/js/14.f5c8b4a0.js"><link rel="prefetch" href="/VuejsQuest/assets/js/15.8e1db5fa.js"><link rel="prefetch" href="/VuejsQuest/assets/js/16.71f3dadb.js"><link rel="prefetch" href="/VuejsQuest/assets/js/17.411d6603.js"><link rel="prefetch" href="/VuejsQuest/assets/js/18.59ec666b.js"><link rel="prefetch" href="/VuejsQuest/assets/js/19.b908b99d.js"><link rel="prefetch" href="/VuejsQuest/assets/js/2.5fff9e17.js"><link rel="prefetch" href="/VuejsQuest/assets/js/20.c016aa9d.js"><link rel="prefetch" href="/VuejsQuest/assets/js/21.527ee2e5.js"><link rel="prefetch" href="/VuejsQuest/assets/js/22.626cc8bd.js"><link rel="prefetch" href="/VuejsQuest/assets/js/23.6a89655e.js"><link rel="prefetch" href="/VuejsQuest/assets/js/25.6f23811d.js"><link rel="prefetch" href="/VuejsQuest/assets/js/26.0669bc4d.js"><link rel="prefetch" href="/VuejsQuest/assets/js/27.ad957979.js"><link rel="prefetch" href="/VuejsQuest/assets/js/28.bf80f907.js"><link rel="prefetch" href="/VuejsQuest/assets/js/29.a8c0170c.js"><link rel="prefetch" href="/VuejsQuest/assets/js/3.2dabca98.js"><link rel="prefetch" href="/VuejsQuest/assets/js/30.537c08de.js"><link rel="prefetch" href="/VuejsQuest/assets/js/31.9b7dbdea.js"><link rel="prefetch" href="/VuejsQuest/assets/js/32.845c9f59.js"><link rel="prefetch" href="/VuejsQuest/assets/js/33.1c7a03ef.js"><link rel="prefetch" href="/VuejsQuest/assets/js/34.f09184b4.js"><link rel="prefetch" href="/VuejsQuest/assets/js/35.1942c82a.js"><link rel="prefetch" href="/VuejsQuest/assets/js/36.29b0183e.js"><link rel="prefetch" href="/VuejsQuest/assets/js/37.dbb0a0ff.js"><link rel="prefetch" href="/VuejsQuest/assets/js/4.8ee6190f.js"><link rel="prefetch" href="/VuejsQuest/assets/js/5.177c3077.js"><link rel="prefetch" href="/VuejsQuest/assets/js/6.553cd5b8.js"><link rel="prefetch" href="/VuejsQuest/assets/js/7.ab7696bf.js"><link rel="prefetch" href="/VuejsQuest/assets/js/8.cfaa725b.js"><link rel="prefetch" href="/VuejsQuest/assets/js/9.2fab3716.js">
    <link rel="stylesheet" href="/VuejsQuest/assets/css/0.styles.9be503db.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/VuejsQuest/" class="home-link router-link-active"><!----> <span class="site-name">勇者鬥 Vue 龍</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/VuejsQuest/2019-ithelp-ironman/" class="nav-link router-link-active">2019 iT 邦幫忙鐵人賽</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/VuejsQuest/2019-ithelp-ironman/" class="nav-link router-link-active">2019 iT 邦幫忙鐵人賽</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/VuejsQuest/2019-ithelp-ironman/" class="sidebar-link">2019 iT 邦幫忙鐵人賽</a></li><li><a href="/VuejsQuest/2019-ithelp-ironman/01_Preface.html" class="sidebar-link">前言</a></li><li><a href="/VuejsQuest/2019-ithelp-ironman/02_FirstVue.html" class="sidebar-link">初探 Vue.js</a></li><li><a href="/VuejsQuest/2019-ithelp-ironman/03_Instance.html" class="sidebar-link">Vue 實例</a></li><li><a href="/VuejsQuest/2019-ithelp-ironman/04_Lifecycle.html" class="sidebar-link">Vue 實體的生命週期</a></li><li><a href="/VuejsQuest/2019-ithelp-ironman/05_Mustache.html" class="sidebar-link">模板語法 Part 1 - Mustache 標籤</a></li><li><a href="/VuejsQuest/2019-ithelp-ironman/06_Directives.html" class="sidebar-link">模板語法 Part 2 - Directives</a></li><li><a href="/VuejsQuest/2019-ithelp-ironman/07_Computed.html" class="sidebar-link">計算屬性</a></li><li><a href="/VuejsQuest/2019-ithelp-ironman/08_Watcher.html" class="sidebar-link">監聽器( watch )</a></li><li><a href="/VuejsQuest/2019-ithelp-ironman/09_ComputedVSWatch.html" class="sidebar-link">計算屬性與監聽器的比較</a></li><li><a href="/VuejsQuest/2019-ithelp-ironman/10_Class.html" class="sidebar-link">Class 的綁定</a></li><li><a href="/VuejsQuest/2019-ithelp-ironman/11_Style.html" class="sidebar-link">樣式綁定</a></li><li><a href="/VuejsQuest/2019-ithelp-ironman/12_Conditional.html" class="sidebar-link">條件渲染</a></li><li><a href="/VuejsQuest/2019-ithelp-ironman/13_For.html" class="sidebar-link">列表渲染</a></li><li><a href="/VuejsQuest/2019-ithelp-ironman/14_Reactivity.html" class="sidebar-link">響應系統</a></li><li><a href="/VuejsQuest/2019-ithelp-ironman/15_Set.html" class="sidebar-link">使用 set 新增實體中的屬性</a></li><li><a href="/VuejsQuest/2019-ithelp-ironman/16_Event.html" class="sidebar-link">事件處理</a></li><li><a href="/VuejsQuest/2019-ithelp-ironman/17_EventModifier.html" class="sidebar-link">v-on 的修飾符 Part 1 - 事件修飾符</a></li><li><a href="/VuejsQuest/2019-ithelp-ironman/18_KeyModifier.html" class="sidebar-link">v-on 的修飾符 Part 2 - 按鍵修飾符</a></li><li><a href="/VuejsQuest/2019-ithelp-ironman/19_FormInputBinding.html" class="sidebar-link">表單綁定</a></li><li><a href="/VuejsQuest/2019-ithelp-ironman/20_ComponentBasic.html" class="sidebar-link">組件基礎</a></li><li><a href="/VuejsQuest/2019-ithelp-ironman/21_ComponentData.html" class="sidebar-link">組件間的資料傳輸</a></li><li><a href="/VuejsQuest/2019-ithelp-ironman/22_ComponentRegistration.html" class="sidebar-link">組件註冊</a></li><li><a href="/VuejsQuest/2019-ithelp-ironman/23_Props.html" class="sidebar-link">props 屬性</a></li><li><a href="/VuejsQuest/2019-ithelp-ironman/24_PropsValidation.html" class="sidebar-link">屬性驗證</a></li><li><a href="/VuejsQuest/2019-ithelp-ironman/25_PropsAttribute.html" class="sidebar-link">屬性注意事項</a></li><li><a href="/VuejsQuest/2019-ithelp-ironman/26_CustomEvent.html" class="sidebar-link">客製事件</a></li><li><a href="/VuejsQuest/2019-ithelp-ironman/27_Slots.html" class="sidebar-link">插槽</a></li><li><a href="/VuejsQuest/2019-ithelp-ironman/28_KeepAlive.html" class="sidebar-link">動態組件</a></li><li><a href="/VuejsQuest/2019-ithelp-ironman/29_AsyncComponent.html" class="active sidebar-link">非同步組件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/VuejsQuest/2019-ithelp-ironman/29_AsyncComponent.html#定義非同步組件" class="sidebar-link">定義非同步組件</a></li><li class="sidebar-sub-header"><a href="/VuejsQuest/2019-ithelp-ironman/29_AsyncComponent.html#工廠函數" class="sidebar-link">工廠函數</a></li><li class="sidebar-sub-header"><a href="/VuejsQuest/2019-ithelp-ironman/29_AsyncComponent.html#promise" class="sidebar-link">Promise</a></li><li class="sidebar-sub-header"><a href="/VuejsQuest/2019-ithelp-ironman/29_AsyncComponent.html#物件" class="sidebar-link">物件</a></li><li class="sidebar-sub-header"><a href="/VuejsQuest/2019-ithelp-ironman/29_AsyncComponent.html#demo" class="sidebar-link">DEMO</a></li><li class="sidebar-sub-header"><a href="/VuejsQuest/2019-ithelp-ironman/29_AsyncComponent.html#結語" class="sidebar-link">結語</a></li><li class="sidebar-sub-header"><a href="/VuejsQuest/2019-ithelp-ironman/29_AsyncComponent.html#參考資料" class="sidebar-link">參考資料</a></li></ul></li><li><a href="/VuejsQuest/2019-ithelp-ironman/30_End.html" class="sidebar-link">結尾</a></li><li><a href="/VuejsQuest/2019-ithelp-ironman/31_AccessOtherComponent.html" class="sidebar-link">尋訪其他組件</a></li><li><a href="/VuejsQuest/2019-ithelp-ironman/32_DependencyInjection.html" class="sidebar-link">依賴注入</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="非同步組件"><a href="#非同步組件" aria-hidden="true" class="header-anchor">#</a> 非同步組件</h1> <p>在大型專案中，我們會需要在入大量的組件，這時候就可以使用非同步組件在需要時在載入需要的組件。</p> <h2 id="定義非同步組件"><a href="#定義非同步組件" aria-hidden="true" class="header-anchor">#</a> 定義非同步組件</h2> <p>原本的 <code>Vue.component</code> 第二個參數是放組件物件的，可是如果是非同步組件的話就會是下面三種不同的傳入參數:</p> <ul><li><strong>工廠函數</strong></li> <li><strong><code>Promise</code></strong></li> <li><strong>物件</strong></li></ul> <p>下面會做詳細的介紹。</p> <h2 id="工廠函數"><a href="#工廠函數" aria-hidden="true" class="header-anchor">#</a> 工廠函數</h2> <p>工廠函數有兩個參數: <code>reolsve</code> 函數跟 <code>reject</code> 函數。</p> <p>在工廠函數中使用非同步的方式取回組件，如果成功則叫用 <code>resolve</code> 並帶入組件，告訴工廠函數已經取得組件，而 <code>reject</code> 則是組件取得失敗時叫用，傳入失敗的理由。</p> <p>下面一個使用工廠函數的非同步組件範例:</p> <div class="language-js extra-class"><pre class="language-js"><code>Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'async-component-factory-function'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      template<span class="token punctuation">:</span> <span class="token string">'&lt;div&gt;Async Component&lt;/div&gt;'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>這個例子使用 <code>setTimeout</code> 模擬非同步的情形，在 <code>1</code> 秒後叫用 <code>resolve</code> 函數，並傳回組件物件。</p> <p>如此一來過了 <code>1</code> 秒之後頁面就會取得組件而進行渲染了。</p> <p>接著來看失敗時候的情形:</p> <div class="language-js extra-class"><pre class="language-js"><code>Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'async-component-base'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'Error!!!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>reject</code> 函數跟 <code>resolve</code> 的參數不同，它是傳入錯誤訊息。</p> <p>過了一秒後可以在 <code>Console</code> 看到下面的訊息:</p> <p><img src="data:image/png;base64,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" alt="reject"></p> <p>它會輸出是在哪裡拋出 <code>reject</code> 以及錯誤訊息。</p> <h2 id="promise"><a href="#promise" aria-hidden="true" class="header-anchor">#</a> <code>Promise</code></h2> <p><code>Vue.component</code> 的第二個參數也可以是 <code>Promise</code> 物件。</p> <p>如下例所示:</p> <div class="language-js extra-class"><pre class="language-js"><code>Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'async-component-promise'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      template<span class="token punctuation">:</span> <span class="token string">'&lt;div&gt;Async Component&lt;/div&gt;'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// reject('Error!!!');</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>其實 <code>Promise</code> 的第一個參數就是工廠函數，所以使用方式跟工廠函數相同。</p> <h2 id="物件"><a href="#物件" aria-hidden="true" class="header-anchor">#</a> 物件</h2> <p>最後要介紹的是功能最強大的物件定義方式，它可以在物件中定義三個組件及兩個數值:</p> <ul><li><code>component</code> : 非同步組件。</li> <li><code>loading</code> : 在非同步組件載入前渲染於頁面的組件。</li> <li><code>error</code> : 載入錯誤時的組件。</li> <li><code>delay</code> : 在 <code>delay</code> 多久後顯示等待組件。</li> <li><code>timeout</code> : 超過 <code>timeout</code> 時間後渲染錯誤組件。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> LoadingComponent <span class="token operator">=</span> <span class="token punctuation">{</span>
  template<span class="token punctuation">:</span> <span class="token string">'&lt;div&gt;Loading...&lt;/div&gt;'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ErrorComponent <span class="token operator">=</span> <span class="token punctuation">{</span>
  template<span class="token punctuation">:</span> <span class="token string">'&lt;div&gt;Error!!!&lt;/div&gt;'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'async-component'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  component<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          template<span class="token punctuation">:</span> <span class="token string">'&lt;div&gt;Async Component&lt;/div&gt;'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// reject('Error!!!');</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  loading<span class="token punctuation">:</span> LoadingComponent<span class="token punctuation">,</span>
  error<span class="token punctuation">:</span> ErrorComponent<span class="token punctuation">,</span>
  delay<span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
  timeout<span class="token punctuation">:</span> <span class="token number">3000</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>這個例子設定如下:</p> <ul><li>在 <code>1</code> 秒載入組件。</li> <li><code>0.2</code> 秒後顯示等待組件 <code>LoadingComponent</code> 。</li> <li>如果超過 <code>3</code> 秒，顯示錯誤組件 <code>ErrorComponent</code> 。</li></ul> <h2 id="demo"><a href="#demo" aria-hidden="true" class="header-anchor">#</a> DEMO</h2> <h3 id="codepen"><a href="#codepen" aria-hidden="true" class="header-anchor">#</a> CodePen</h3> <p data-height="265" data-theme-id="0" data-default-tab="js,result" data-user="peterhpchen" data-slug-hash="GwNWdB" data-pen-title="Async Component" class="codepen" style="height: 265px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;"><span>See the Pen <a href="https://codepen.io/peterhpchen/pen/GwNWdB/">
  Async Component</a> by Peter Chen (<a href="https://codepen.io/peterhpchen">@peterhpchen</a>)
  on <a href="https://codepen.io">CodePen</a>.</span></p> <script async="async" src="https://static.codepen.io/assets/embed/ei.js"></script> <h3 id="github"><a href="#github" aria-hidden="true" class="header-anchor">#</a> GitHub</h3> <ul><li><a href="https://github.com/peterhpchen/VuejsQuest/blob/master/demo/29_AsyncComponent/index.html" target="_blank" rel="noopener noreferrer">GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <blockquote><p>如果要嘗試 <code>reject</code> 函數的話不能使用 <strong>CodePen</strong> ，它會吃到警告訊息。</p></blockquote> <h2 id="結語"><a href="#結語" aria-hidden="true" class="header-anchor">#</a> 結語</h2> <p>本文介紹了非同步組件的三種使用方式: 工廠函數、 <code>Promise</code> 及物件，物件的方式可以在尚未載入組件前先秀出等待組件，也可以在錯誤時秀出錯誤組件來引導使用者。</p> <h2 id="參考資料"><a href="#參考資料" aria-hidden="true" class="header-anchor">#</a> 參考資料</h2> <ul><li><a href="https://vuejs.org/v2/guide/components-dynamic-async.html#Async-Components" target="_blank" rel="noopener noreferrer">Vue.js Guide: Async Components<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://vuejs.org/v2/api/#Vue-component" target="_blank" rel="noopener noreferrer">Vue.js API: Vue.component( id, [definition] )<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/VuejsQuest/2019-ithelp-ironman/28_KeepAlive.html" class="prev">
          動態組件
        </a></span> <span class="next"><a href="/VuejsQuest/2019-ithelp-ironman/30_End.html">
          結尾
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/VuejsQuest/assets/js/app.f1a38c46.js" defer></script><script src="/VuejsQuest/assets/js/24.e80266e1.js" defer></script>
  </body>
</html>
