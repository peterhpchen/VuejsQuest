<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>父元件及子元件間的生命週期(Lifecycle) | 勇者鬥 Vue 龍</title>
    <meta name="description" content="Vue.js 學習之旅">
    <link rel="icon" href="/VuejsQuest/logo.ico">
    
    <link rel="preload" href="/VuejsQuest/assets/css/0.styles.fd938c14.css" as="style"><link rel="preload" href="/VuejsQuest/assets/js/app.3cda7ffc.js" as="script"><link rel="preload" href="/VuejsQuest/assets/js/39.213bcf5e.js" as="script"><link rel="prefetch" href="/VuejsQuest/assets/js/10.af55a15c.js"><link rel="prefetch" href="/VuejsQuest/assets/js/11.b48ec62e.js"><link rel="prefetch" href="/VuejsQuest/assets/js/12.03c1acf3.js"><link rel="prefetch" href="/VuejsQuest/assets/js/13.aba3065c.js"><link rel="prefetch" href="/VuejsQuest/assets/js/14.dc4c92ff.js"><link rel="prefetch" href="/VuejsQuest/assets/js/15.08e20b59.js"><link rel="prefetch" href="/VuejsQuest/assets/js/16.fcf78aaa.js"><link rel="prefetch" href="/VuejsQuest/assets/js/17.359f0196.js"><link rel="prefetch" href="/VuejsQuest/assets/js/18.33e83092.js"><link rel="prefetch" href="/VuejsQuest/assets/js/19.c234c94c.js"><link rel="prefetch" href="/VuejsQuest/assets/js/2.b6f39ec7.js"><link rel="prefetch" href="/VuejsQuest/assets/js/20.2602f260.js"><link rel="prefetch" href="/VuejsQuest/assets/js/21.3fa4b041.js"><link rel="prefetch" href="/VuejsQuest/assets/js/22.79bd018c.js"><link rel="prefetch" href="/VuejsQuest/assets/js/23.0f8bafdd.js"><link rel="prefetch" href="/VuejsQuest/assets/js/24.67c87aca.js"><link rel="prefetch" href="/VuejsQuest/assets/js/25.2866c1c8.js"><link rel="prefetch" href="/VuejsQuest/assets/js/26.425922f6.js"><link rel="prefetch" href="/VuejsQuest/assets/js/27.1c784354.js"><link rel="prefetch" href="/VuejsQuest/assets/js/28.f0f9c63b.js"><link rel="prefetch" href="/VuejsQuest/assets/js/29.727d2c30.js"><link rel="prefetch" href="/VuejsQuest/assets/js/3.0f11998d.js"><link rel="prefetch" href="/VuejsQuest/assets/js/30.36b3e29e.js"><link rel="prefetch" href="/VuejsQuest/assets/js/31.e23136d2.js"><link rel="prefetch" href="/VuejsQuest/assets/js/32.b67d9df6.js"><link rel="prefetch" href="/VuejsQuest/assets/js/33.11b70a68.js"><link rel="prefetch" href="/VuejsQuest/assets/js/34.5716f271.js"><link rel="prefetch" href="/VuejsQuest/assets/js/35.0fd9bc8e.js"><link rel="prefetch" href="/VuejsQuest/assets/js/36.7e806ed8.js"><link rel="prefetch" href="/VuejsQuest/assets/js/37.736996d7.js"><link rel="prefetch" href="/VuejsQuest/assets/js/38.ff7559cb.js"><link rel="prefetch" href="/VuejsQuest/assets/js/4.73f200ba.js"><link rel="prefetch" href="/VuejsQuest/assets/js/40.f9d70aa2.js"><link rel="prefetch" href="/VuejsQuest/assets/js/5.e24738e2.js"><link rel="prefetch" href="/VuejsQuest/assets/js/6.e882b1ed.js"><link rel="prefetch" href="/VuejsQuest/assets/js/7.c15b61ba.js"><link rel="prefetch" href="/VuejsQuest/assets/js/8.ad25c7cf.js"><link rel="prefetch" href="/VuejsQuest/assets/js/9.3a530d1f.js">
    <link rel="stylesheet" href="/VuejsQuest/assets/css/0.styles.fd938c14.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/VuejsQuest/" class="home-link router-link-active"><!----> <span class="site-name">勇者鬥 Vue 龍</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/VuejsQuest/basic/01_Preface.html" class="nav-link">基礎</a></div> <a href="https://github.com/peterhpchen/VuejsQuest" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/VuejsQuest/basic/01_Preface.html" class="nav-link">基礎</a></div> <a href="https://github.com/peterhpchen/VuejsQuest" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/VuejsQuest/basic/01_Preface.html" class="sidebar-link">踏上旅程之前</a></li><li><a href="/VuejsQuest/basic/02_FirstVue.html" class="sidebar-link">初探 Vue.js</a></li><li><a href="/VuejsQuest/basic/03_Instance.html" class="sidebar-link">Vue 實例</a></li><li><a href="/VuejsQuest/basic/04_Lifecycle.html" class="sidebar-link">Vue 實體的生命週期</a></li><li><a href="/VuejsQuest/basic/05_Mustache.html" class="sidebar-link">模板語法 Part 1 - Mustache 標籤</a></li><li><a href="/VuejsQuest/basic/06_Directives.html" class="sidebar-link">模板語法 Part 2 - Directives</a></li><li><a href="/VuejsQuest/basic/07_Computed.html" class="sidebar-link">計算屬性</a></li><li><a href="/VuejsQuest/basic/08_Watcher.html" class="sidebar-link">監聽器( watch )</a></li><li><a href="/VuejsQuest/basic/09_ComputedVSWatch.html" class="sidebar-link">計算屬性與監聽器的比較</a></li><li><a href="/VuejsQuest/basic/10_Class.html" class="sidebar-link">Class 的綁定</a></li><li><a href="/VuejsQuest/basic/11_Style.html" class="sidebar-link">樣式綁定</a></li><li><a href="/VuejsQuest/basic/12_Conditional.html" class="sidebar-link">條件渲染</a></li><li><a href="/VuejsQuest/basic/13_For.html" class="sidebar-link">列表渲染</a></li><li><a href="/VuejsQuest/basic/14_Reactivity.html" class="sidebar-link">響應系統</a></li><li><a href="/VuejsQuest/basic/15_Set.html" class="sidebar-link">使用 set 新增實體中的屬性</a></li><li><a href="/VuejsQuest/basic/16_Event.html" class="sidebar-link">事件處理</a></li><li><a href="/VuejsQuest/basic/17_EventModifier.html" class="sidebar-link">v-on 的修飾符 Part 1 - 事件修飾符</a></li><li><a href="/VuejsQuest/basic/18_KeyModifier.html" class="sidebar-link">v-on 的修飾符 Part 2 - 按鍵修飾符</a></li><li><a href="/VuejsQuest/basic/19_FormInputBinding.html" class="sidebar-link">表單綁定</a></li><li><a href="/VuejsQuest/basic/20_ComponentBasic.html" class="sidebar-link">組件基礎</a></li><li><a href="/VuejsQuest/basic/21_ComponentData.html" class="sidebar-link">組件間的資料傳輸</a></li><li><a href="/VuejsQuest/basic/22_ComponentRegistration.html" class="sidebar-link">組件註冊</a></li><li><a href="/VuejsQuest/basic/23_Props.html" class="sidebar-link">props 屬性</a></li><li><a href="/VuejsQuest/basic/24_PropsValidation.html" class="sidebar-link">屬性驗證</a></li><li><a href="/VuejsQuest/basic/25_PropsAttribute.html" class="sidebar-link">屬性注意事項</a></li><li><a href="/VuejsQuest/basic/26_CustomEvent.html" class="sidebar-link">客製事件</a></li><li><a href="/VuejsQuest/basic/27_Slots.html" class="sidebar-link">插槽</a></li><li><a href="/VuejsQuest/basic/28_KeepAlive.html" class="sidebar-link">動態組件</a></li><li><a href="/VuejsQuest/basic/29_AsyncComponent.html" class="sidebar-link">非同步組件</a></li><li><a href="/VuejsQuest/basic/31_AccessOtherComponent.html" class="sidebar-link">尋訪其他組件</a></li><li><a href="/VuejsQuest/basic/32_DependencyInjection.html" class="sidebar-link">依賴注入</a></li><li><a href="/VuejsQuest/basic/33_EventListeners.html" class="sidebar-link">事件監聽器</a></li><li><a href="/VuejsQuest/basic/34_Template.html" class="sidebar-link">模板定義</a></li><li><a href="/VuejsQuest/basic/parent-child-lifecycle.html" class="active sidebar-link">父元件及子元件間的生命週期(Lifecycle)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/VuejsQuest/basic/parent-child-lifecycle.html#建立父元件" class="sidebar-link">建立父元件</a></li><li class="sidebar-sub-header"><a href="/VuejsQuest/basic/parent-child-lifecycle.html#建立子元件" class="sidebar-link">建立子元件</a></li><li class="sidebar-sub-header"><a href="/VuejsQuest/basic/parent-child-lifecycle.html#將子元件加入父元件中" class="sidebar-link">將子元件加入父元件中</a></li><li class="sidebar-sub-header"><a href="/VuejsQuest/basic/parent-child-lifecycle.html#父元件使用-ref-變動子元件-data" class="sidebar-link">父元件使用 ref 變動子元件 data</a></li><li class="sidebar-sub-header"><a href="/VuejsQuest/basic/parent-child-lifecycle.html#使用-props-變動子元件-data" class="sidebar-link">使用 props 變動子元件 data</a></li><li class="sidebar-sub-header"><a href="/VuejsQuest/basic/parent-child-lifecycle.html#多個子元件" class="sidebar-link">多個子元件</a></li><li class="sidebar-sub-header"><a href="/VuejsQuest/basic/parent-child-lifecycle.html#多個子元件的-destroy" class="sidebar-link">多個子元件的 destroy</a></li><li class="sidebar-sub-header"><a href="/VuejsQuest/basic/parent-child-lifecycle.html#結論" class="sidebar-link">結論</a></li></ul></li></ul> </div> <div class="page"> <div class="content"><h1 id="父元件及子元件間的生命週期-lifecycle"><a href="#父元件及子元件間的生命週期-lifecycle" aria-hidden="true" class="header-anchor">#</a> 父元件及子元件間的生命週期(Lifecycle)</h1> <p>之前已經有提到 <a href="/VuejsQuest/basic/04_Lifecycle.html">Vue 實體的生命週期</a>，現在我們來研究一下如果加上子元件的話整個生命週期會是怎麼跑的。</p> <h2 id="建立父元件"><a href="#建立父元件" aria-hidden="true" class="header-anchor">#</a> 建立父元件</h2> <p>使用 Vue 的 root 當作父元件：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  root count: {{count}}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>count++<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>+1 for root<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>$destroy()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>destroy root<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>設置 <code>count</code> 並變動其值以便測試 <code>update</code> 鉤子</li> <li>設置 <code>$destroy</code> 事件 trigger 以便測試 <code>destroy</code> 鉤子</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span> <span class="token string">&quot;#app&quot;</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    count<span class="token punctuation">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">beforeCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;root beforeCreate&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;root create&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">beforeMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;root beforeMount&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;root mounted&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">beforeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;root beforeUpdate&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">updated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;root updated&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">beforeDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;root beforeDestroy&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">destroyed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;root destroyed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>在各個 hook 上設置 <code>console.log</code> 以便觀察其觸發的時機。</p> <h2 id="建立子元件"><a href="#建立子元件" aria-hidden="true" class="header-anchor">#</a> 建立子元件</h2> <p>使用 <code>Vue.component</code> <a href="/VuejsQuest/basic/22_ComponentRegistration.html#全域註冊">註冊元件</a>。</p> <div class="language-js extra-class"><pre class="language-js"><code>Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&quot;child-component&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  template<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`
    &lt;div :style=&quot;style&quot;&gt;{{$options.name}} count: {{count}}
      &lt;button
        @click=&quot;count++&quot;
      &gt;+1 for child&lt;/button&gt;
      &lt;button
        @click=&quot;$destroy()&quot;
      &gt;destroy child&lt;/button&gt;
    &lt;/div&gt;`</span></span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      count<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      style<span class="token punctuation">:</span> <span class="token string">&quot;background-color: pink;&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">beforeCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>$options<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> beforeCreate`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>$options<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> create`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">beforeMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>$options<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> beforeMount`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>$options<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> mounted`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">beforeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>$options<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> beforeUpdate`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">updated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>$options<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> updated`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">beforeDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>$options<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> beforeDestroy`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">destroyed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>$options<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> destroyed`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>與父元件相同使用 <code>count</code> 及 <code>$destroy</code> 觀察 <code>update</code> 及 <code>destroy</code> 鉤子，並在各個 hook 加上 <code>console.log</code> 。</p> <h2 id="將子元件加入父元件中"><a href="#將子元件加入父元件中" aria-hidden="true" class="header-anchor">#</a> 將子元件加入父元件中</h2> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  root count: {{count}}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>count++<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>+1 for root<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>$destroy()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>destroy root<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>child-component</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>child<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>childComponent<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>父元件 <code>mounted</code> 結束後會是下面這樣的結果：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token string">&quot;root beforeCreate&quot;</span>
<span class="token string">&quot;root create&quot;</span>
<span class="token string">&quot;root beforeMount&quot;</span>
<span class="token string">&quot;child-component beforeCreate&quot;</span>
<span class="token string">&quot;child-component create&quot;</span>
<span class="token string">&quot;child-component beforeMount&quot;</span>
<span class="token string">&quot;child-component mounted&quot;</span>
<span class="token string">&quot;root mounted&quot;</span>
</code></pre></div><p>父元件在 <code>beforeMount</code> 鉤子執行完後會去做創建子元件的實體並且完成渲染後才會叫用 <code>mounted</code> 鉤子。</p> <p>接著按下父元件中的 <code>+1 for root</code> 按鈕：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token string">&quot;root beforeUpdate&quot;</span>
<span class="token string">&quot;root updated&quot;</span>
</code></pre></div><p>會發現只有父元件的 <code>update</code> 鉤子會被觸發。</p> <p>再來按下子元件中的 <code>+1 for child</code> 按鈕：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token string">&quot;child-component beforeUpdate&quot;</span>
<span class="token string">&quot;child-component updated&quot;</span>
</code></pre></div><p>會發現子元件的更新也不會觸發父元件的 <code>update</code> 鉤子。</p> <p>接著在父元件中按下 <code>destroy root</code> 按鈕：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token string">&quot;root beforeDestroy&quot;</span>
<span class="token string">&quot;child-component beforeDestroy&quot;</span>
<span class="token string">&quot;child-component destroyed&quot;</span>
<span class="token string">&quot;root destroyed&quot;</span>
</code></pre></div><p>root 在執行 <code>beforeDestroy</code> 後會執行完 child 的 <code>destroy</code> 後再執行 <code>destroyed</code> 鉤子。</p> <p>接著因為 Vue 實體已經 <code>destroy</code> ，因此需要重新整理頁面以恢復原本的狀態。</p> <p>重整後按下子元件的 <code>destroy</code> ：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token string">&quot;child-component beforeDestroy&quot;</span>
<span class="token string">&quot;child-component destroyed&quot;</span>
</code></pre></div><p>只有 child 的 <code>destroy</code> 鉤子被觸發。</p> <h2 id="父元件使用-ref-變動子元件-data"><a href="#父元件使用-ref-變動子元件-data" aria-hidden="true" class="header-anchor">#</a> 父元件使用 ref 變動子元件 data</h2> <p>經由剛剛的測試我們知道父元件更新自身的數值是不會觸發子元件的 <code>update</code> 鉤子，那如果在父元件上使用 ref 變動子元件的 data 呢？</p> <p>為了測試，在父元件中加上 <code>sync child</code> 按鈕：</p> <div class="language-html extra-class"><div class="highlight-lines"><br><br><br><br><div class="highlighted"> </div><br><br><br></div><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  root count: {{count}}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>count++<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>+1 for root<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>$destroy()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>destroy root<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>sync<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>sync child<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>child-component</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>child<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>childComponent<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><div class="highlighted"> </div><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token operator">...</span>
  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">sync</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>childComponent<span class="token punctuation">.</span>count <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>按下 <code>sync child</code> 後，結果如下：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token string">&quot;child-component beforeUpdate&quot;</span>
<span class="token string">&quot;child-component updated&quot;</span>
</code></pre></div><p>雖然是在 root 觸發變動，但只有 child 的 <code>update</code> 會被執行，因為只有 child 的 <code>data</code> 有被變動。</p> <h2 id="使用-props-變動子元件-data"><a href="#使用-props-變動子元件-data" aria-hidden="true" class="header-anchor">#</a> 使用 props 變動子元件 data</h2> <p>上面直接用 <code>ref</code> 修改子元件內部的 <code>data</code> ，這次使用 <code>props</code> 試試看。</p> <p>使用原本的 <code>count</code> 會將父元件的 <code>template</code> ，為避免因此而觸發父元件的 <code>update</code> ，在父元件中加入 <code>parentCount</code> :</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><div class="highlighted"> </div><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token operator">...</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    count<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    parentCount<span class="token punctuation">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>另外在 <code>template</code> 中加入 <code>+1 for root parent count</code> 按鈕，並且將 <code>parentCount</code> 傳入 child 中:</p> <div class="language-html extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><div class="highlighted"> </div><br><br></div><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  root count: {{count}}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>count++<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>+1 for root<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>parentCount++<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>+1 for root parent count<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>$destroy()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>destroy root<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>child-component</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>child<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:parent-count</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>parentCount<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&quot;child-component&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  props<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'parentCount'</span><span class="token punctuation">]</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>按下後結果如下：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token string">&quot;root beforeUpdate&quot;</span>
<span class="token string">&quot;child-component beforeUpdate&quot;</span>
<span class="token string">&quot;child-component updated&quot;</span>
<span class="token string">&quot;root updated&quot;</span>
</code></pre></div><p>雖然 <code>parentCount</code> 沒有變動 root 的模板，但依然觸發了 <code>update</code> 鉤子，由此可知，不管 <code>data</code> 有沒有掛到畫面上，變動 <code>data</code> 就會觸發 <code>update</code> 鉤子。</p> <h2 id="多個子元件"><a href="#多個子元件" aria-hidden="true" class="header-anchor">#</a> 多個子元件</h2> <p>剛剛的例子只有一個子元件，現在來看看多個子元件會是怎麼運作的：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> mixin <span class="token operator">=</span> <span class="token punctuation">{</span>
  template<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`
    &lt;div :style=&quot;style&quot;&gt;{{$options.name}} count: {{count}}
      &lt;button
        @click=&quot;count++&quot;
      &gt;+1 for child&lt;/button&gt;
      &lt;button
        @click=&quot;$destroy()&quot;
      &gt;destroy child&lt;/button&gt;
    &lt;/div&gt;`</span></span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      count<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      style<span class="token punctuation">:</span> <span class="token string">&quot;background-color: pink;&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  props<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'parentCount'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  watch<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">parentCount</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">=</span> val<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">beforeCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>$options<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> beforeCreate`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>$options<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> create`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">beforeMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>$options<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> beforeMount`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>$options<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> mounted`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">beforeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>$options<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> beforeUpdate`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">updated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>$options<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> updated`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">beforeDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>$options<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> beforeDestroy`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">destroyed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>$options<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> destroyed`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&quot;child-component&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  mixins<span class="token punctuation">:</span> <span class="token punctuation">[</span>mixin<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&quot;child-two-component&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  mixins<span class="token punctuation">:</span> <span class="token punctuation">[</span>mixin<span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      style<span class="token punctuation">:</span> <span class="token string">&quot;background-color: yellow&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&quot;child-three-component&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  mixins<span class="token punctuation">:</span> <span class="token punctuation">[</span>mixin<span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      style<span class="token punctuation">:</span> <span class="token string">&quot;background-color: gray&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>將剛剛的 child <code>options</code> 拉出來變成 <code>mixin</code> ，並使用 <code>mixin</code> 定義子元件，為了區分使用不同的顏色當背景。</p> <p>並且加進 root 中：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  root count: {{count}}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>count++<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>+1 for root<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>parentCount++<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>+1 for root parent count<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>$destroy()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>destroy root<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>child-component</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>child<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:parent-count</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>parentCount<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>child-two-component</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>child<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:parent-count</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>parentCount<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>child-three-component</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>child<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:parent-count</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>parentCount<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>可以看到再渲染時的鉤子觸發順序：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token string">&quot;root beforeCreate&quot;</span>
<span class="token string">&quot;root create&quot;</span>
<span class="token string">&quot;root beforeMount&quot;</span>
<span class="token string">&quot;child-component beforeCreate&quot;</span>
<span class="token string">&quot;child-component create&quot;</span>
<span class="token string">&quot;child-component beforeMount&quot;</span>
<span class="token string">&quot;child-two-component beforeCreate&quot;</span>
<span class="token string">&quot;child-two-component create&quot;</span>
<span class="token string">&quot;child-two-component beforeMount&quot;</span>
<span class="token string">&quot;child-three-component beforeCreate&quot;</span>
<span class="token string">&quot;child-three-component create&quot;</span>
<span class="token string">&quot;child-three-component beforeMount&quot;</span>
<span class="token string">&quot;child-component mounted&quot;</span>
<span class="token string">&quot;child-two-component mounted&quot;</span>
<span class="token string">&quot;child-three-component mounted&quot;</span>
<span class="token string">&quot;root mounted&quot;</span>
</code></pre></div><p>對各別 child 按下 <code>+1 for child</code>：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token string">&quot;child-component beforeUpdate&quot;</span>
<span class="token string">&quot;child-component updated&quot;</span>
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token string">&quot;child-two-component beforeUpdate&quot;</span>
<span class="token string">&quot;child-two-component updated&quot;</span>
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token string">&quot;child-three-component beforeUpdate&quot;</span>
<span class="token string">&quot;child-three-component updated&quot;</span>
</code></pre></div><p>各個 child 是互不影響的，都只會觸發自身的 <code>update</code> 鉤子。</p> <p>現在因為按下 <code>+1</code> 的關係，所有的 child 的 <code>count</code> 都是 <code>1</code>，這時再按 <code>+1 for root parent count</code> 的話，結果如下：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token string">&quot;root beforeUpdate&quot;</span>
<span class="token string">&quot;root updated&quot;</span>
</code></pre></div><p>雖然 <code>parentCount</code> 變為 <code>1</code> ，但是因為跟 child <code>count</code> 的值相同，所以不會觸發 <code>update</code> 。</p> <p>這時再按下 <code>+1 for root parent count</code> 會看到 child 的 <code>update</code> 觸發：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token string">&quot;root beforeUpdate&quot;</span>
<span class="token string">&quot;child-component beforeUpdate&quot;</span>
<span class="token string">&quot;child-two-component beforeUpdate&quot;</span>
<span class="token string">&quot;child-three-component beforeUpdate&quot;</span>
<span class="token string">&quot;child-three-component updated&quot;</span>
<span class="token string">&quot;child-two-component updated&quot;</span>
<span class="token string">&quot;child-component updated&quot;</span>
<span class="token string">&quot;root updated&quot;</span>
</code></pre></div><p>可以看到鉤子依序觸發 <code>beforeUpdate</code> ，再以反序觸發 <code>updated</code> 。</p> <h2 id="多個子元件的-destroy"><a href="#多個子元件的-destroy" aria-hidden="true" class="header-anchor">#</a> 多個子元件的 destroy</h2> <p>按下 root 的 <code>destroy</code> 按鈕觀察 <code>destroy</code> 的情形：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token string">&quot;root beforeDestroy&quot;</span>
<span class="token string">&quot;child-component beforeDestroy&quot;</span>
<span class="token string">&quot;child-component destroyed&quot;</span>
<span class="token string">&quot;child-two-component beforeDestroy&quot;</span>
<span class="token string">&quot;child-two-component destroyed&quot;</span>
<span class="token string">&quot;child-three-component beforeDestroy&quot;</span>
<span class="token string">&quot;child-three-component destroyed&quot;</span>
<span class="token string">&quot;root destroyed&quot;</span>
</code></pre></div><p>個別的子元件依序觸發了 <code>destory</code> 。</p> <h3 id="demo"><a href="#demo" aria-hidden="true" class="header-anchor">#</a> DEMO</h3> <ul><li><a href="https://codepen.io/peterhpchen/pen/mdJvyvv?editors=1111" target="_blank" rel="noopener noreferrer">CODEPEN<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <iframe height="265" scrolling="no" title="Parent Child Lifecycle" src="https://codepen.io/peterhpchen/embed/mdJvyvv?height=265&theme-id=light&default-tab=js,result" frameborder="no" allowtransparency="true" allowfullscreen="allowfullscreen" style="width: 100%;">
  See the Pen <a href="https://codepen.io/peterhpchen/pen/mdJvyvv">Parent Child Lifecycle</a> by Peter Chen
  (<a href="https://codepen.io/peterhpchen">@peterhpchen</a>) on <a href="https://codepen.io">CodePen</a>.
</iframe> <h2 id="結論"><a href="#結論" aria-hidden="true" class="header-anchor">#</a> 結論</h2> <p>之前介紹了各個生命週期的的定義及觸發時機，這次介紹了元件間交互的生命週期，定義及交互都瞭解對於開發是很有幫助的，也可以減少叫用錯誤的問題。</p></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/VuejsQuest/basic/34_Template.html" class="prev">
          模板定義
        </a></span> <!----></p></div> </div> <!----></div></div>
    <script src="/VuejsQuest/assets/js/app.3cda7ffc.js" defer></script><script src="/VuejsQuest/assets/js/39.213bcf5e.js" defer></script>
  </body>
</html>
