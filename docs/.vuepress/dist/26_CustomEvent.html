<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>客製事件</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/VuejsQuest/assets/css/0.styles.e2b483a8.css" as="style"><link rel="preload" href="/VuejsQuest/assets/js/app.02849b32.js" as="script"><link rel="preload" href="/VuejsQuest/assets/js/13.f595af6d.js" as="script"><link rel="prefetch" href="/VuejsQuest/assets/js/10.e9afd3bf.js"><link rel="prefetch" href="/VuejsQuest/assets/js/11.4b5241f2.js"><link rel="prefetch" href="/VuejsQuest/assets/js/12.768ebd57.js"><link rel="prefetch" href="/VuejsQuest/assets/js/14.7e346007.js"><link rel="prefetch" href="/VuejsQuest/assets/js/15.672e9dc1.js"><link rel="prefetch" href="/VuejsQuest/assets/js/16.fd1a39c3.js"><link rel="prefetch" href="/VuejsQuest/assets/js/17.d7dd77b2.js"><link rel="prefetch" href="/VuejsQuest/assets/js/18.66c0a396.js"><link rel="prefetch" href="/VuejsQuest/assets/js/19.a59ff6d8.js"><link rel="prefetch" href="/VuejsQuest/assets/js/2.63a5198f.js"><link rel="prefetch" href="/VuejsQuest/assets/js/20.60e476fd.js"><link rel="prefetch" href="/VuejsQuest/assets/js/21.e42dcee7.js"><link rel="prefetch" href="/VuejsQuest/assets/js/22.faa27a0c.js"><link rel="prefetch" href="/VuejsQuest/assets/js/23.3f418d2e.js"><link rel="prefetch" href="/VuejsQuest/assets/js/24.9bed62e1.js"><link rel="prefetch" href="/VuejsQuest/assets/js/25.c9efd8c9.js"><link rel="prefetch" href="/VuejsQuest/assets/js/26.60e3cfcb.js"><link rel="prefetch" href="/VuejsQuest/assets/js/27.7e53d61a.js"><link rel="prefetch" href="/VuejsQuest/assets/js/28.bb765208.js"><link rel="prefetch" href="/VuejsQuest/assets/js/29.b6ad611d.js"><link rel="prefetch" href="/VuejsQuest/assets/js/3.708e253c.js"><link rel="prefetch" href="/VuejsQuest/assets/js/30.0866cee8.js"><link rel="prefetch" href="/VuejsQuest/assets/js/31.47d88aca.js"><link rel="prefetch" href="/VuejsQuest/assets/js/32.9367e64a.js"><link rel="prefetch" href="/VuejsQuest/assets/js/33.99661d05.js"><link rel="prefetch" href="/VuejsQuest/assets/js/34.c7ae6566.js"><link rel="prefetch" href="/VuejsQuest/assets/js/35.1253f4e0.js"><link rel="prefetch" href="/VuejsQuest/assets/js/36.f7256931.js"><link rel="prefetch" href="/VuejsQuest/assets/js/4.5fa4edf6.js"><link rel="prefetch" href="/VuejsQuest/assets/js/5.fb695ff4.js"><link rel="prefetch" href="/VuejsQuest/assets/js/6.f46a417c.js"><link rel="prefetch" href="/VuejsQuest/assets/js/7.dc2185ef.js"><link rel="prefetch" href="/VuejsQuest/assets/js/8.6afafb58.js"><link rel="prefetch" href="/VuejsQuest/assets/js/9.5a3bfb97.js">
    <link rel="stylesheet" href="/VuejsQuest/assets/css/0.styles.e2b483a8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/VuejsQuest/" class="home-link router-link-active"></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><!---->  <!----> </div> <div class="page"> <div class="content"><h1 id="客製事件"><a href="#客製事件" aria-hidden="true" class="header-anchor">#</a> 客製事件</h1> <p>前面用三章的篇幅介紹 Props ，接著本文要來介紹組件的另一個重要的部分: 事件，在 Vue.js 中使用 <code>v-on</code> 可以設定某事件觸發後要做的事情，而組件上的事件設定又更為彈性，可以使用開發者自訂的事件做更細部的操作，而通過事件將子組件資料傳回父組件更是開發組件中不可或缺的，現在讓我們來學習如何使用事件吧。</p> <h2 id="事件命名"><a href="#事件命名" aria-hidden="true" class="header-anchor">#</a> 事件命名</h2> <p>客製的事件<strong>不會轉換名字</strong>，他會直接用原本的字串對應，因此如下面的子組件模板:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>$emit(<span class="token punctuation">'</span>plusCount<span class="token punctuation">'</span>, count++)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>+<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>子組件中觸發 <code>plusCount</code> 事件，並把 <code>count</code> 加一的結果往上拋，現在看父組件中的設定:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>counter</span> <span class="token attr-name">@plus-count</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>count=$event<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>counter</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>父組件在模板上設定的事件名稱是 <code>plus-count</code> 這樣的 kabab-case 字串，但因為事件的名稱對應不存在任何的轉換，因此 <code>plusCount</code> 不會對應到 <code>plus-count</code> ，所以子組件拋出的 <code>plusCount</code> 不會觸發 <code>plus-count</code> 事件。</p> <p>假設你今天用 <code>@plusCount</code> 做設定，則模板在轉換時會因為 HTML 是不分大小寫的而把事件名稱改為 <code>pluscount</code> ，這樣也不會監聽到 <code>plusCount</code> 的觸發，因此最好的方式就是都使用 kabab-case 名稱。</p> <p>如下例:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 子組件模板 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>$emit(<span class="token punctuation">'</span>plus-count<span class="token punctuation">'</span>, count++)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>+<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 父組件模板 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>counter</span> <span class="token attr-name">@plus-count</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>count=$event<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>counter</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>上例才是正確的，所以在事件命名時:</p> <ul><li><code>$emit</code> 的事件名稱使用 kabab-case 。</li> <li>父組件上綁定的事件名稱使用 kabab-case 。</li></ul> <blockquote><p>組件跟 <code>props</code> 屬性因為有可能是變數或是屬性，因此有可能會同時設定在 HTML 跟 JavaScript 代碼，所以需要在 kabab-case 及 camelCase 間轉換，但事件不同，事件並不會是變數或是屬性，它只有可能設定在 HTML 模板上，因此 Vue.js 就不做轉換的動作了，開發時直接使用 kabab-case 的命名就好。</p></blockquote> <h2 id="客製組件的-v-model"><a href="#客製組件的-v-model" aria-hidden="true" class="header-anchor">#</a> 客製組件的 <code>v-model</code></h2> <p>之前有提到 <code>v-model</code> 是 <code>v-bind:value</code> 及 <code>v-on:input</code> 的語法糖，它的作用是做<strong>雙向綁定</strong>，但有些像是 <code>radio</code> 及 <code>checkbox</code> 需要 <code>value</code> 去綁定各別選項的值，而真正勾選的值是由像是 <code>checked</code> 之類的屬性綁定，為了避免 <code>v-model</code> 產生衝突，可以將 <code>model</code> 改為 <code>v-bind:checked</code> 及 <code>v-on:change</code> 來讓 <code>v-model</code> 運作正常。</p> <p>下面的例子將 <code>model</code> 改為使用 <code>v-bind:checked</code> 及 <code>v-on:change</code> :</p> <div class="language-js extra-class"><pre class="language-js"><code>Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'base-checkbox'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  model<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    prop<span class="token punctuation">:</span> <span class="token string">'checked'</span><span class="token punctuation">,</span> <span class="token comment">// 預設為 value</span>
    event<span class="token punctuation">:</span> <span class="token string">'change'</span> <span class="token comment">// 預設為 input</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  props<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'checked'</span><span class="token punctuation">,</span> <span class="token string">'label'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 跟 value 一樣， v-model 的 prop : cheked 要設定在 props 中</span>
  template<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`
    &lt;label&gt;
      &lt;input
        type=&quot;checkbox&quot;
        :checked=&quot;checked&quot;
        @change=&quot;$emit('change', $event.target.checked)&quot;
      &gt;
      {{label}}
    &lt;/label&gt;
  `</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>在子組件的實體中設定 <code>model</code> 物件，這個物件有兩個屬性 <code>prop</code> 及 <code>event</code> :</p> <ul><li><code>prop</code> : <code>v-model</code> 目標屬性。</li> <li><code>event</code> : <code>v-model</code> 監聽的事件。</li></ul> <p>設定好 <code>model</code> 的 <code>prop</code> 及 <code>event</code> 後，就可以依照原生的 <code>checkbox</code> 勾選值去改變 <code>model</code> 值。</p> <h2 id="綁定原生事件"><a href="#綁定原生事件" aria-hidden="true" class="header-anchor">#</a> 綁定原生事件</h2> <p>要綁定原生事件可以用 <code>native</code> 修飾符，這樣 Vue.js 會知道這個事件是原生的事件而直接綁定到<strong>組件的根元素</strong>上，如下例的輸入組件:</p> <div class="language-js extra-class"><pre class="language-js"><code>Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'base-input'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  template<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`
    &lt;input&gt;
  `</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>這個組件很簡單，只有一個 <code>&lt;input&gt;</code> 標籤，接著看一下父組件:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>base-input</span> <span class="token attr-name">@focus.native</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>onFocus<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>base-input</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">onFocus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'focus'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>如此一來 <code>focus</code> 在輸入框時， <code>Console</code> 就會輸出 <code>focus</code> :</p> <p><img src="data:image/png;base64,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" alt="focus"></p> <p>但是如果是像下面這樣設定子組件:</p> <div class="language-js extra-class"><pre class="language-js"><code>Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'base-input-with-label'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  props<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'value'</span><span class="token punctuation">,</span> <span class="token string">'label'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  template<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`
    &lt;label&gt;
      {{label}}
      &lt;input&gt;
    &lt;/label&gt;
  `</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>因為根元素是 <code>&lt;label&gt;</code> 而非 <code>&lt;input&gt;</code> ，所以 <code>@focus.native</code> 會綁定到 <code>&lt;label&gt;</code> 導致 <code>focus</code> 事件不會被觸發，為了解決這個問題， Vue.js 提供了 <code>$listeners</code> ，這個物件包含所有的父組件事件(排除有 <code>native</code> 修飾符的事件)，如此一來我們就可以使用 <code>$listeners</code> 綁定想要的元素。</p> <p>將剛才的 <code>base-input-with-label</code> 的 <code>&lt;input&gt;</code> 綁定 <code>$listeners</code> :</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span>
  {{label}}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span>
    <span class="token attr-name">v-on</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>$listeners<span class="token punctuation">&quot;</span></span>
  <span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>將父組件中的 <code>focus</code> 事件拿掉 <code>native</code> 修飾符:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>base-input-with-label</span> <span class="token attr-name">@focus</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>onFocus<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>base-input-with-label</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>這樣就可以觸發 <code>&lt;input&gt;</code> 的 <code>focus</code> 事件。</p> <h3 id="合併父子組件的事件"><a href="#合併父子組件的事件" aria-hidden="true" class="header-anchor">#</a> 合併父子組件的事件</h3> <p>使用 <code>v-on=&quot;$listeners&quot;</code> 會使子組件的事件綁定出現問題，為了整合父子組件的事件，我們可以使用計算屬性將父子的事件合併後再統一綁定到元素上。</p> <p>假設剛剛的 <code>input</code> 需要使用 <code>v-model</code> 綁定資料，我們本來會像下面這樣設定:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span>
  {{label}}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span>
    <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>value<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">@input</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>$emit(<span class="token punctuation">'</span>input<span class="token punctuation">'</span>, $event.target.value)<span class="token punctuation">&quot;</span></span>
  <span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>但因為我們要多綁定 <code>$listener</code> ，所以使用一個計算屬性來合併:</p> <div class="language-js extra-class"><pre class="language-js"><code>Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'base-input-with-label'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  props<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'value'</span><span class="token punctuation">,</span> <span class="token string">'label'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  computed<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    inputListeners<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 使用 Object.assign 合併物件</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$listeners<span class="token punctuation">,</span> <span class="token comment">// 將 $listeners 的事件當作預設值</span>
        <span class="token punctuation">{</span>
          input<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            vm<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">,</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token comment">// 覆蓋 $listeners 中的 input 事件</span>
      <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  template<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`
    &lt;label&gt;
      {{label}}
      &lt;input
        v-on=&quot;inputListeners&quot;
        :value=&quot;value&quot;
      &gt;
    &lt;/label&gt;
  `</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>直接綁定 <code>inputListeners</code> 就可以綁定父子組件合併後的事件。</p> <blockquote><p><code>$listeners</code> 跟 <code>$attrs</code> 搭配可以使客製組件上的設定跟原生的元素完全一樣，而不用去擔心組件中的模板配置。</p></blockquote> <h2 id="sync-修飾符"><a href="#sync-修飾符" aria-hidden="true" class="header-anchor">#</a> <code>.sync</code> 修飾符</h2> <p>有時屬性也跟 <code>model</code> 一樣會需要做雙向綁定，這時可以用客製事件達成，在 Vue.js 中官方建議使用 <code>update:[屬性名]</code> 的事件叫用父組件更新屬性，如下例所示:</p> <div class="language-js extra-class"><pre class="language-js"><code>Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'base-button'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  props<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  template<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`
    &lt;button @click=&quot;click&quot;&gt;{{title}}&lt;/button&gt;
  `</span></span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> newTitle <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>title<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'update:title'</span><span class="token punctuation">,</span> newTitle<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>父組件如下:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>base-button</span> <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">@update:</span>title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>title=$event<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>base-button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token punctuation">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    title<span class="token punctuation">:</span> <span class="token string">'I Love Vue.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>這樣我們就可在子組件中更新 <code>title</code> 的字串:</p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGgAAAAfCAYAAAALO4jYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAH3SURBVGhD7ZaLccMgDIY9EeuwDMN4gezAKp6E8jBBkkEJvZooPenuuxaCEOIXSragJtpUIOGmAgk3FUi4qUDC7SLQ4/FQPsDIugIdx6EsRAUSjgokHBVIOCqQcD4g0B7sZoLzvc9+gw/ObGGz++Uz70zYjAuezP89b+a027Bt8awndu+sIfyPF5QTt2FH80U44zyYu4uZopsr0PsEItWSK/w5xx0wJdD8WpXRxOC4+KCK9C6Yi2iQXhwaIwL3yf9Xn9FZXjGz9i6BciIkgWcL4g5Iqh5dMvXD493GSwNtLre3TtsrjOOM90nxQBGgV8vlRJlZe6tAox7LHBAJkigX2a9uMk4X9vy+gX4duDjo4kfziRR/dDaOmbULW1y7LOaAxAf7Uj9mnATgfhywcYAocJ/kg/bkiodjZu2qHwmo+pgDonUURpBzTWpHqW3Vv82XwMZpbQ3tc/FJ8b9VoJgMuiBU0fCApQpbzy9j6OudRWvLhZyXSBPNcWyw5tUFcHEiuQVGcdA+RZC+YN8m0JlMax800TqmAnV8YVvJl1LmjXOdRHv7jWDiRPKPBTJXhKs+NKc6X+m8UHD+RC02jpsE4oACKa9YL9Cllysc6wQCz/udp60U1r8gZYppgZT1jOwikJosU4GEmwok3FQg4aYCCTcVSLSF8APHH0RHgZvsBgAAAABJRU5ErkJggg==" alt="sync"></p> <p>點擊按鈕會將名稱反序。</p> <p>Vue.js 為了讓開發者撰寫的代碼較為單純而提供了 <code>.sync</code> 修飾符，它是一個屬性雙向綁定的語法糖，因此如下的屬性設定:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>base-button</span> <span class="token attr-name">:title.sync</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>base-button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>其實就是剛剛的代碼:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>base-button</span> <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">@update:</span>title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>title=$event<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>base-button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><blockquote><p><code>.sync</code> 修飾符不能使用表達式設定，你只能像是 <code>v-model</code> 那樣使用屬性名稱做設置。</p></blockquote> <h3 id="sync-綁定整個物件"><a href="#sync-綁定整個物件" aria-hidden="true" class="header-anchor">#</a> <code>.sync</code> 綁定整個物件</h3> <p>之前介紹的 <code>.sync</code> 修飾符是綁定單一屬性，其實它也可以綁定物件:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>base-button</span> <span class="token attr-name">v-bind.sync</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>obj<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>base-button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>obj<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  title<span class="token punctuation">:</span> <span class="token string">'I am in obj'</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>.sync</code> 會將物件中<strong>所有的屬性</strong>都當作子組件屬性傳入子組件，並且註冊每一個屬性的 <code>update</code> 事件。</p> <h2 id="demo"><a href="#demo" aria-hidden="true" class="header-anchor">#</a> DEMO</h2> <ul><li><a href="https://codepen.io/peterhpchen/pen/ZmOVpQ" target="_blank" rel="noopener noreferrer">CodePen<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h2 id="結語"><a href="#結語" aria-hidden="true" class="header-anchor">#</a> 結語</h2> <p>本文介紹了客製事件，它的名稱只能使用 kabab-case ，也可以配合修改 <code>model</code> 的設定使 <code>v-model</code> 綁定不同的屬性及事件，再來使介紹原生事件的設定及合併父子組件的方法，最後講解 <code>.sync</code> 修飾符。</p> <h2 id="參考資料"><a href="#參考資料" aria-hidden="true" class="header-anchor">#</a> 參考資料</h2> <ul><li><a href="https://vuejs.org/v2/guide/components-custom-events.html" target="_blank" rel="noopener noreferrer">Vue.js Guide: Custom Events<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://vuejs.org/v2/api/#model" target="_blank" rel="noopener noreferrer">Vue.js API: model<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://vuejs.org/v2/api/#vm-listeners" target="_blank" rel="noopener noreferrer">Vue.js API: vm.$listeners<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/VuejsQuest/assets/js/app.02849b32.js" defer></script><script src="/VuejsQuest/assets/js/13.f595af6d.js" defer></script>
  </body>
</html>
